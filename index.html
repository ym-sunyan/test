<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read Config Files</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .folder { margin-top: 20px; }
        .file-content { margin-left: 20px; }
    </style>
</head>
<body>
    <h1>Config Files Content</h1>
    <div id="content"></div>

    <script>
        async function fetchFileContent(owner, repo, path) {
            const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
            const response = await fetch(url);
            const data = await response.json();
            if (Array.isArray(data)) {
                // If the path is a directory, recursively fetch files
                for (const item of data) {
                    if (item.type === 'file' && item.name === 'config.txt') {
                        const fileContent = await fetchFileContent(owner, repo, item.path);
                        displayContent(item.path, fileContent);
                    } else if (item.type === 'dir') {
                        await fetchFileContent(owner, repo, item.path);
                    }
                }
            } else {
                // If the path is a file, return its content
                const content = atob(data.content);
                const decoder = new TextDecoder('utf-8');
                return decoder.decode(new Uint8Array([...content].map(char => char.charCodeAt(0))));
            }
        }

        function displayContent(path, content) {
            const contentDiv = document.getElementById('content');
            const folderDiv = document.createElement('div');
            folderDiv.className = 'folder';
            folderDiv.innerHTML = `<strong>${path}</strong>`;
            const fileContentDiv = document.createElement('div');
            fileContentDiv.className = 'file-content';
            fileContentDiv.textContent = content;
            folderDiv.appendChild(fileContentDiv);
            contentDiv.appendChild(folderDiv);
        }

        async function loadConfigFiles() {
            const owner = 'ym-sunyan';
            const repo = 'test';
            const path = ''; // Root directory
            await fetchFileContent(owner, repo, path);
        }

        loadConfigFiles();
    </script>
</body>
</html>
